<HTML>
    <head>
        <title> tic_tac_toe </title>
    </head>
    <body>
        <canvas id=myCanvas width=600 height=600 style="background-color: black;"> </canvas>
        <script>
        var ctx = myCanvas.getContext("2d"); 
        var x = 100;
        var y = 100;
        var pos = 1;
        var turn = 0;
        var move = 1;
        var random = 0;
        var player = "";
        var pc = "";
        ctx.strokeStyle="white";
        ctx.fillStyle="white";
        ctx.font="40px Arial";
        ctx.lineWidth=10;
        ctx.beginPath();
        ctx.moveTo(0,200);
        ctx.lineTo(600,200);
        ctx.moveTo(0,400);
        ctx.lineTo(600,400);
        ctx.moveTo(200,0);
        ctx.lineTo(200,600);
        ctx.moveTo(400,0);
        ctx.lineTo(400,600);
        ctx.stroke(); // draws board
        function again(){
            location.reload();
        }
        function win(){
            if(player.search(1)!==-1&&player.search(2)!==-1&&player.search(3)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,100);
                ctx.lineTo(580,100);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(4)!==-1&&player.search(5)!==-1&&player.search(6)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,300);
                ctx.lineTo(580,300);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(7)!==-1&&player.search(8)!==-1&&player.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,500);
                ctx.lineTo(580,500);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(1)!==-1&&player.search(4)!==-1&&player.search(7)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(100,20);
                ctx.lineTo(100,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(2)!==-1&&player.search(5)!==-1&&player.search(8)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(300,20);
                ctx.lineTo(300,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(3)!==-1&&player.search(6)!==-1&&player.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(500,20);
                ctx.lineTo(500,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(1)!==-1&&player.search(5)!==-1&&player.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(40,40);
                ctx.lineTo(560,560);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(player.search(3)!==-1&&player.search(5)!==-1&&player.search(7)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(560,40);
                ctx.lineTo(40,560);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="green";
                ctx.strokeText("You Win!",225,315);
                ctx.fillText("You Win!",225,315);
                move=0;
                setTimeout(again,2500) }
            //checks if players won
            else if(pc.search(1)!==-1&&pc.search(2)!==-1&&pc.search(3)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,100);
                ctx.lineTo(580,100);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(4)!==-1&&pc.search(5)!==-1&&pc.search(6)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,300);
                ctx.lineTo(580,300);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(7)!==-1&&pc.search(8)!==-1&&pc.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(20,500);
                ctx.lineTo(580,500);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(1)!==-1&&pc.search(4)!==-1&&pc.search(7)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(100,20);
                ctx.lineTo(100,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(2)!==-1&&pc.search(5)!==-1&&pc.search(8)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(300,20);
                ctx.lineTo(300,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(3)!==-1&&pc.search(6)!==-1&&pc.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(500,20);
                ctx.lineTo(500,580);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(1)!==-1&&pc.search(5)!==-1&&pc.search(9)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(40,40);
                ctx.lineTo(560,560);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            else if(pc.search(3)!==-1&&pc.search(5)!==-1&&pc.search(7)!==-1){
                ctx.lineWidth=25;
                ctx.beginPath();
                ctx.moveTo(560,40);
                ctx.lineTo(40,560);
                ctx.stroke();
                ctx.lineWidth=2;
                ctx.fillStyle="red";
                ctx.strokeText("You Lose",225,315);
                ctx.fillText("You Lose",225,315);
                move=0;
                setTimeout(again,2500) }
            //checks if pcs won
        } 
        setInterval(win,100); //checks if someones won
        function cross(){
            if(pos==1||pos==2||pos==3){
                y=100 }
            if(pos==4||pos==5||pos==6){
                y=300 }
            if(pos==7||pos==8||pos==9){
                y=500 }
            if(pos==1||pos==4||pos==7){
                x=100 }
            if(pos==2||pos==5||pos==8){
                x=300 }
            if(pos==3||pos==6||pos==9){
                x=500 } //sets cross x & y from pos
            ctx.beginPath();
            ctx.moveTo(x-50,y-50);
            ctx.lineTo(x+50,y+50);
            ctx.moveTo(x+50,y-50);
            ctx.lineTo(x-50,y+50);
            ctx.stroke();
        } //draws a cross
        function knort(){
            ctx.beginPath();
            ctx.arc(x,y,75,0,Math.PI*2);
            ctx.stroke();
        } //draws a circle
        function computerturn(){
            if(move==1){
                pos=Math.floor(Math.random()*9)+1;
            } //picks random on first turn
            else if(move==5){
                ctx.lineWidth=2;
                ctx.fillStyle="purple";
                ctx.strokeText("Draw",255,315);
                ctx.fillText("Draw",255,315);
                move=0;
                setTimeout(again,2500);
            }
            else if(move>1){
                random=Math.floor(Math.random()*3)+1;
                if(pc.search(1)!==-1&&pc.search(2)!==-1&&player.search(3)==-1){
                    pos=3 }
                else if(pc.search(1)!==-1&&pc.search(3)!==-1&&player.search(2)==-1){
                    pos=2 }
                else if(pc.search(2)!==-1&&pc.search(3)!==-1&&player.search(1)==-1){
                    pos=1 }
                else if(pc.search(4)!==-1&&pc.search(5)!==-1&&player.search(6)==-1){
                    pos=6 }
                else if(pc.search(4)!==-1&&pc.search(6)!==-1&&player.search(5)==-1){
                    pos=5 }
                else if(pc.search(5)!==-1&&pc.search(6)!==-1&&player.search(4)==-1){
                    pos=4 }
                else if(pc.search(7)!==-1&&pc.search(8)!==-1&&player.search(9)==-1){
                    pos=9 }
                else if(pc.search(7)!==-1&&pc.search(9)!==-1&&player.search(8)==-1){
                    pos=8 }
                else if(pc.search(8)!==-1&&pc.search(9)!==-1&&player.search(7)==-1){
                    pos=7 }
                else if(pc.search(1)!==-1&&pc.search(4)!==-1&&player.search(7)==-1){
                    pos=7 }
                else if(pc.search(1)!==-1&&pc.search(7)!==-1&&player.search(4)==-1){
                    pos=4 }
                else if(pc.search(4)!==-1&&pc.search(7)!==-1&&player.search(1)==-1){
                    pos=1 }
                else if(pc.search(2)!==-1&&pc.search(5)!==-1&&player.search(8)==-1){
                    pos=8 }
                else if(pc.search(2)!==-1&&pc.search(8)!==-1&&player.search(5)==-1){
                    pos=5 }
                else if(pc.search(5)!==-1&&pc.search(8)!==-1&&player.search(2)==-1){
                    pos=2 }
                else if(pc.search(3)!==-1&&pc.search(6)!==-1&&player.search(9)==-1){
                    pos=9 }
                else if(pc.search(3)!==-1&&pc.search(9)!==-1&&player.search(6)==-1){
                    pos=6 }
                else if(pc.search(6)!==-1&&pc.search(9)!==-1&&player.search(3)==-1){
                    pos=3 }
                else if(pc.search(1)!==-1&&pc.search(5)!==-1&&player.search(9)==-1){
                    pos=9 }
                else if(pc.search(1)!==-1&&pc.search(9)!==-1&&player.search(5)==-1){
                    pos=5 }
                else if(pc.search(5)!==-1&&pc.search(9)!==-1&&player.search(1)==-1){
                    pos=1 }
                else if(pc.search(3)!==-1&&pc.search(5)!==-1&&player.search(7)==-1){
                    pos=7 }
                else if(pc.search(3)!==-1&&pc.search(7)!==-1&&player.search(5)==-1){
                    pos=5 }
                else if(pc.search(5)!==-1&&pc.search(7)!==-1&&player.search(3)==-1){
                    pos=3 }
                //makes pc win
                else if(random==1){
                    if(player.search(1)!==-1&&player.search(2)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(3)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(2)!==-1&&player.search(3)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(4)!==-1&&player.search(5)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(4)!==-1&&player.search(6)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(6)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(7)!==-1&&player.search(8)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(7)!==-1&&player.search(9)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(8)!==-1&&player.search(9)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(1)!==-1&&player.search(4)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(1)!==-1&&player.search(7)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(4)!==-1&&player.search(7)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(2)!==-1&&player.search(5)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(2)!==-1&&player.search(8)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(8)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(3)!==-1&&player.search(6)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(3)!==-1&&player.search(9)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(6)!==-1&&player.search(9)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(5)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(1)!==-1&&player.search(9)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(9)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(3)!==-1&&player.search(5)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(3)!==-1&&player.search(7)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(7)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    //stops the player winning
                    else{
                        pos=Math.floor(Math.random()*9)+1 } }
                else if(random==2){
                    if(player.search(1)!==-1&&player.search(4)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(1)!==-1&&player.search(7)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(4)!==-1&&player.search(7)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(2)!==-1&&player.search(5)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(2)!==-1&&player.search(8)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(8)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(3)!==-1&&player.search(6)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(3)!==-1&&player.search(9)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(6)!==-1&&player.search(9)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(5)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(1)!==-1&&player.search(9)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(9)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(3)!==-1&&player.search(5)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(3)!==-1&&player.search(7)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(7)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(2)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(3)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(2)!==-1&&player.search(3)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(4)!==-1&&player.search(5)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(4)!==-1&&player.search(6)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(6)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(7)!==-1&&player.search(8)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(7)!==-1&&player.search(9)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(8)!==-1&&player.search(9)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    //stops the player winning
                    else{
                        pos=Math.floor(Math.random()*9)+1 } }
                else if(random==3){
                    if(player.search(1)!==-1&&player.search(4)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(1)!==-1&&player.search(7)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(4)!==-1&&player.search(7)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(2)!==-1&&player.search(5)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(2)!==-1&&player.search(8)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(8)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(1)!==-1&&player.search(2)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(3)!==-1&&pc.search(2)==-1){
                        pos=2 }
                    else if(player.search(2)!==-1&&player.search(3)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(4)!==-1&&player.search(5)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(4)!==-1&&player.search(6)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(6)!==-1&&pc.search(4)==-1){
                        pos=4 }
                    else if(player.search(7)!==-1&&player.search(8)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(7)!==-1&&player.search(9)!==-1&&pc.search(8)==-1){
                        pos=8 }
                    else if(player.search(8)!==-1&&player.search(9)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(3)!==-1&&player.search(6)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(3)!==-1&&player.search(9)!==-1&&pc.search(6)==-1){
                        pos=6 }
                    else if(player.search(6)!==-1&&player.search(9)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    else if(player.search(1)!==-1&&player.search(5)!==-1&&pc.search(9)==-1){
                        pos=9 }
                    else if(player.search(1)!==-1&&player.search(9)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(9)!==-1&&pc.search(1)==-1){
                        pos=1 }
                    else if(player.search(3)!==-1&&player.search(5)!==-1&&pc.search(7)==-1){
                        pos=7 }
                    else if(player.search(3)!==-1&&player.search(7)!==-1&&pc.search(5)==-1){
                        pos=5 }
                    else if(player.search(5)!==-1&&player.search(7)!==-1&&pc.search(3)==-1){
                        pos=3 }
                    //stops the player winning
                    else{
                        pos=Math.floor(Math.random()*9)+1 } }
                    //makes a move if no 2 in a line
            }
            
            if(player.search(pos)==-1&&pc.search(pos)==-1){
                    cross();
                    pc+=pos;
                    move+=1;
                    turn=0;
                }
                else{
                    computerturn();
                } //checks space isn't occupided
        }
        function MyHandler(MyEvent){
            if(move!==0){
            if(turn==0){
                if(MyEvent.clientX<200){
                    if(MyEvent.clientY<200){
                        if(player.search("1")==-1&&pc.search("1")==-1){
                            player+="1";
                            pos=1;
                            x=100;
                            y=100;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else if(MyEvent.clientY<400){
                        if(player.search("4")==-1&&pc.search("4")==-1){
                            player+="4";
                            pos=4;
                            x=100;
                            y=300;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else{
                        if(player.search("7")==-1&&pc.search("7")==-1){
                            player+="7";
                            pos=7;
                            x=100;
                            y=500;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                }
                else if(MyEvent.clientX<400){
                    if(MyEvent.clientY<200){
                        if(player.search("2")==-1&&pc.search("2")==-1){
                            player+="2";
                            pos=2;
                            x=300;
                            y=100;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else if(MyEvent.clientY<400){
                        if(player.search("5")==-1&&pc.search("5")==-1){
                            player+="5";
                            pos=5;
                            x=300;
                            y=300;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else{
                        if(player.search("8")==-1&&pc.search("8")==-1){
                            player+="8";
                            pos=8;
                            x=300;
                            y=500;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                }
                else{
                    if(MyEvent.clientY<200){
                        if(player.search("3")==-1&&pc.search("3")==-1){
                            player+="3";
                            pos=3;
                            x=500;
                            y=100;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else if(MyEvent.clientY<400){
                        if(player.search("6")==-1&&pc.search("6")==-1){
                            player+="6";
                            pos=6;
                            x=500;
                            y=300;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                    else{
                        if(player.search("9")==-1&&pc.search("9")==-1){
                            player+="9";
                            pos=9;
                            x=500;
                            y=500;
                            knort();
                            turn=1;
                            setTimeout(computerturn,500);
                        }
                    }
                }
            } }
        } //clicks which square
        addEventListener("mousedown",MyHandler);
        </script>

    </body>
</html>
